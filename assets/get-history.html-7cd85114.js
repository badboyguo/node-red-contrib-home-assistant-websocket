import{_ as i,r as p,o as r,c as l,a as t,b as n,d as a,e as o}from"./app-dbaf0596.js";const c={},d=o('<h1 id="get-history" tabindex="-1"><a class="header-anchor" href="#get-history" aria-hidden="true">#</a> Get History</h1><p>Fetches history from Home Assistant (all history for the past day by default)</p><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h2><h3 id="entity-id" tabindex="-1"><a class="header-anchor" href="#entity-id" aria-hidden="true">#</a> Entity ID</h3><ul><li>Type: <code>string</code></li></ul><p>Exact entity_id to fetch history for must be an exact match as is passed directly to the Home Assistant.</p><h3 id="entity-id-type" tabindex="-1"><a class="header-anchor" href="#entity-id-type" aria-hidden="true">#</a> Entity ID Type</h3><ul><li>Type: <code>string</code></li><li>Values: <code>is</code> | <code>includes</code></li><li>Default: <code>is</code></li></ul><p><code>is</code> or <code>includes</code> depending on the match type.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p><code>includes</code> fetches all history for the time period then filters according to the value, this will be less performant than exact <code>is</code> matching</p></div><h3 id="start-date" tabindex="-1"><a class="header-anchor" href="#start-date" aria-hidden="true">#</a> Start Date</h3><ul><li>Type: <code>string</code></li><li>Values: ISO Format Date</li><li>Default: 24 hours prior</li></ul><p>Date to start fetching history from. Will override the configuration if passed in</p><p><strong>Also See:</strong></p>',14),u={href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank",rel:"noopener noreferrer"},h=t("h3",{id:"end-date",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#end-date","aria-hidden":"true"},"#"),n(" End Date")],-1),k=t("ul",null,[t("li",null,[n("Type: "),t("code",null,"string")]),t("li",null,"Values: ISO Format Date"),t("li",null,"Default: 24 hours from start date")],-1),y=t("p",null,"The end date to fetch history too. Will override the configuration if passed in",-1),_=t("p",null,[t("strong",null,"Also See:")],-1),g={href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank",rel:"noopener noreferrer"},f=o(`<h3 id="use-relative-time" tabindex="-1"><a class="header-anchor" href="#use-relative-time" aria-hidden="true">#</a> Use Relative Time</h3><ul><li>Type: <code>boolean</code></li><li>Default: <code>false</code></li></ul><p>A checkbox to use relative time or not.</p><h3 id="in-the-last" tabindex="-1"><a class="header-anchor" href="#in-the-last" aria-hidden="true">#</a> In the Last</h3><ul><li>Type: <code>string</code></li></ul><p>A time string that will be parsed the following keywords into time values.</p><p>Example: <code>4h 30m</code> = The last 4 hours and 30 minutes</p><div class="language-text" data-ext="text"><pre class="language-text"><code>ms, milli, millisecond, milliseconds - will parse to milliseconds
s, sec, secs, second, seconds - will parse to seconds
m, min, mins, minute, minutes - will parse to minutes
h, hr, hrs, hour, hours - will parse to hours
d, day, days - will parse to days
w, week, weeks - will parse to weeks
mon, mth, mths, month, months - will parse to months
y, yr, yrs, year, years - will parse to years
</code></pre></div><h3 id="flatten-results" tabindex="-1"><a class="header-anchor" href="#flatten-results" aria-hidden="true">#</a> Flatten Results</h3><p>Instead of returning the data from home assistant ( array for each entity_id ) return one flattened array of one item per history entry</p><h3 id="output-types" tabindex="-1"><a class="header-anchor" href="#output-types" aria-hidden="true">#</a> Output Types</h3><ul><li>Type: <code>string</code></li><li>Values: <code>array</code> | <code>split</code></li><li>Default: <code>array</code></li></ul><h2 id="inputs" tabindex="-1"><a class="header-anchor" href="#inputs" aria-hidden="true">#</a> Inputs</h2><p>All properties of <code>msg.payload</code></p><h3 id="entity-id-1" tabindex="-1"><a class="header-anchor" href="#entity-id-1" aria-hidden="true">#</a> entity_id</h3>`,15),q=t("li",null,[n("Type: "),t("code",null,"string")],-1),m=t("code",null,"msg.entityid",-1),x=t("h3",{id:"startdate",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#startdate","aria-hidden":"true"},"#"),n(" startdate")],-1),b=t("li",null,[n("Type: "),t("code",null,"string")],-1),w=t("li",null,"Values: ISO Format Date",-1),T=t("code",null,"msg.startdate",-1),v=t("h3",{id:"enddate",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#enddate","aria-hidden":"true"},"#"),n(" enddate")],-1),I=t("li",null,[n("Type: "),t("code",null,"string")],-1),A=t("li",null,"Values: ISO Format Date",-1),D=t("code",null,"msg.enddate",-1),S=t("h3",{id:"relativetime",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#relativetime","aria-hidden":"true"},"#"),n(" relativetime")],-1),O=t("li",null,[n("Type: "),t("code",null,"string")],-1),V=t("code",null,"msg.relativetime",-1),E=t("p",null,[n("If "),t("code",null,"relativetime"),n(" exists "),t("code",null,"startdate"),n(" and "),t("code",null,"enddate"),n(" will be ignored.")],-1),H=t("h3",{id:"flatten",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#flatten","aria-hidden":"true"},"#"),n(" flatten")],-1),F=t("li",null,[n("Type: "),t("code",null,"boolean")],-1),N=t("code",null,"msg.flatten",-1),B=o(`<h2 id="outputs" tabindex="-1"><a class="header-anchor" href="#outputs" aria-hidden="true">#</a> Outputs</h2><h3 id="payload" tabindex="-1"><a class="header-anchor" href="#payload" aria-hidden="true">#</a> payload</h3><ul><li>Type: <code>array</code></li></ul><p>The history returned by home-assistant, which is an array of arrays where each array entry contains history objects for one particular entity</p><h3 id="startdate-1" tabindex="-1"><a class="header-anchor" href="#startdate-1" aria-hidden="true">#</a> startdate</h3><ul><li>Type: <code>string</code></li></ul><p>ISO date string used to fetch history</p><h3 id="enddate-1" tabindex="-1"><a class="header-anchor" href="#enddate-1" aria-hidden="true">#</a> enddate</h3><ul><li>Type: <code>string</code></li></ul><p>ISO date string used to fetch history</p><h3 id="entity-id-2" tabindex="-1"><a class="header-anchor" href="#entity-id-2" aria-hidden="true">#</a> entity_id</h3><ul><li>Type: <code>string</code></li></ul><p>The entity id string used during fetch history call</p><p>Example output of <code>msg</code>:</p><div class="language-json" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;startdate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-01-11T16:41:31.086Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;enddate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-01-14T16:41:31.086Z&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;entityid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light.kitchen_light&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;friendly_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Kitchen Light&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mdi:light-switch&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;850e510e36fb494c9abc79e01e897d54&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;parent_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">&quot;user_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light.kitchen_light&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;last_changed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T06:47:28.618000+00:00&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;last_updated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T06:47:28.618000+00:00&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;brightness&quot;</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
        <span class="token property">&quot;friendly_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Kitchen Light&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mdi:light-switch&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4d4abe29f2bc43dab39101193f1fefe4&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;parent_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
        <span class="token property">&quot;user_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light.kitchen_light&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;last_changed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T07:48:11.514137+00:00&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;last_updated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T07:48:11.514137+00:00&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references" aria-hidden="true">#</a> References</h2>`,16),L={href:"https://www.home-assistant.io/integrations/history",target:"_blank",rel:"noopener noreferrer"},j={href:"https://developers.home-assistant.io/docs/en/external_api_rest.html#get-apihistoryperiodlttimestamp",target:"_blank",rel:"noopener noreferrer"};function R(C,W){const s=p("ExternalLinkIcon"),e=p("Badge");return r(),l("div",null,[d,t("ul",null,[t("li",null,[t("a",u,[n("https://en.wikipedia.org/wiki/ISO_8601"),a(s)])])]),h,k,y,_,t("ul",null,[t("li",null,[t("a",g,[n("https://en.wikipedia.org/wiki/ISO_8601"),a(s)])])]),f,t("ul",null,[q,t("li",null,[n("Alias: "),m,n(),a(e,{type:"warning",text:"deprecated"})])]),x,t("ul",null,[b,w,t("li",null,[n("Alias: "),T,n(),a(e,{type:"warning",text:"deprecated"})])]),v,t("ul",null,[I,A,t("li",null,[n("Alias: "),D,n(),a(e,{type:"warning",text:"deprecated"})])]),S,t("ul",null,[O,t("li",null,[n("Alias: "),V,n(),a(e,{type:"warning",text:"deprecated"})])]),E,H,t("ul",null,[F,t("li",null,[n("Alias: "),N,n(),a(e,{type:"warning",text:"deprecated"})])]),B,t("ul",null,[t("li",null,[t("a",L,[n("Home Assistant History Component"),a(s)])]),t("li",null,[t("a",j,[n("Home Assistant API: /api/history/period"),a(s)])])])])}const K=i(c,[["render",R],["__file","get-history.html.vue"]]);export{K as default};
